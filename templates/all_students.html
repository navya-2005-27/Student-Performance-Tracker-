{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h4 class="mb-0">Students</h4>
  <a class="btn btn-success" href="{{ url_for('add_student') }}">+ Add Student</a>
</div>

<form class="input-group mb-3">
  <input class="form-control" name="q" value="{{ q or '' }}" placeholder="Search by name or roll number">
  <button class="btn btn-outline-secondary">Search</button>
</form>

<div class="table-responsive">
  <table class="table table-hover align-middle">
    <thead class="table-light">
      <tr>
        <th>Roll Number</th>
        <th>Name</th>
        <th class="text-end">Actions</th>
      </tr>
    </thead>
    <tbody>
      
      {% for s in students %}
      <tr>
        <td class="fw-semibold">{{ s.roll_number }}</td>
        <td>{{ s.name }}</td>
        <td class="text-end d-flex justify-content-end gap-2">
          <a class="btn btn-sm btn-primary" href="{{ url_for('student_details', roll_number=s.roll_number) }}">View</a>
          <form method="POST" action="{{ url_for('delete_student', roll_number=s.roll_number) }}" onsubmit="return confirm('Are you sure you want to delete this student?');">
            <button type="submit" class="btn btn-sm btn-delete btn-danger">Delete</button>
          </form>
          
        </td>
      </tr>
      {% else %}
      <tr><td colspan="3" class="text-center text-muted">No students yet.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
